<% layout('boilerplate') -%> 

<h1 class="text-3xl font-bold text-center mb-6">Buyers of Your Listings</h1>

<% if (listings.length === 0) { %>
  <p class="text-center text-lg text-gray-500">No properties have been bought yet.</p>
<% } else { %>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4">
    <% listings.forEach(listing => { %>
      <div class="border border-gray-300 p-6 rounded-lg shadow-lg bg-white hover:shadow-xl transition-shadow">
        <h2 class="text-xl font-semibold text-gray-800 mb-3 truncate"><%= listing.title %></h2>

        <p class="text-sm text-gray-600 mb-2">
          <strong class="font-semibold">Buyer:</strong>
          <% if (listing.buyer) { %>
            <span><%= listing.buyer.username || listing.buyer.email %></span>
          <% } else { %>
            <em class="italic text-gray-400">Unknown buyer</em>
          <% } %>
        </p>

        <p class="text-sm text-gray-600 mb-2">
          <strong class="font-semibold">Payment ID:</strong> 
          <%= listing.tokenPaymentId || 'N/A' %>
        </p>

        <p class="text-sm text-gray-600">
          <strong class="font-semibold">Date:</strong> 
          <%= listing.updatedAt ? listing.updatedAt.toLocaleDateString() : 'N/A' %>
        </p>

      </div>
    <% }) %>
  </div>
<% } %>
